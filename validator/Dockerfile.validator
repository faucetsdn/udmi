FROM alpine:latest

WORKDIR /root

# Ideally the same as from Dockerfile.udmis to share layers
RUN apk add --no-cache bash openjdk17 gcompat curl jq sudo git python3 moreutils mosquitto mosquitto-clients openssl coreutils

ADD build/udmi_bin/ bin/
ADD build/udmi_etc/ etc/
ADD build/schema/ schema/

ENV NO_CACHE_DIR=true
RUN bin/setup_base

ADD bin/ validator/bin/
ADD build/libs validator/build/libs/

CMD ["/root/validator/bin/automate"]
