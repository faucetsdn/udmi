#!/bin/bash -e

UDMI_ROOT=$(dirname $0)/..
source $UDMI_ROOT/etc/shell_common.sh

if [[ $# -lt 5 ]]; then
    usage registry_id project_id base_cloning_directory project_spec mapping_family
fi

registry_id=$1
project_id=$2
base_cloning_directory=$3
project_spec=$4
mapping_family=$5

shift 5
    
[[ ! -d $UDMI_ROOT/validator/src ]] ||
    up_to_date $UDMI_JAR $UDMI_ROOT/validator/src ||
    $UDMI_ROOT/validator/bin/build


java -cp $UDMI_JAR com.google.daq.mqtt.mapping.MappingService $registry_id $project_id $base_cloning_directory $project_spec $mapping_family $@
