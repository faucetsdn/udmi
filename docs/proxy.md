# UDMI Proxy

## Sequence Diagram

* _Devices_ are the UDMI/MQTT clients talking to GCP endpoints.
* _Model_ is the building site model.
* _Proxy_ is the intermediate GCP project.
* _Target_ is the end-use GCP project.
* _Dev Setup_ means the devices are configured to talk directly to the Target project.
* _Proxy Setup_ means devices are (re)configured to talk directly to the Proxy project.
* _registrar_ is the UDMI `registrar` tool, run by an authorized (per target project) agent.
* _connect_ is the process of a client connecting to it's configured target.

```
     +---------+ +-------+       +-------+     +---------+
     | Devices | | Model |       | Proxy |     | Target  |
     +---------+ +-------+       +-------+     +---------+
--------\ |          |               |              |
| Dev   |-|          |               |              |
| Setup | |          |               |              |
|-------| |          |               |              |
          |          | registrar     |              |
          |          |----------------------------->|
          |          |               |              |
          | connect  |               |              |
          |---------------------------------------->|
--------\ |          |               |              |
| Proxy |-|          |               |              |
| Setup | |          |               |              |
|-------| |          |               |              |
          |          | registrar     |              |
          |          |-------------->|              |
          |          |               |              |
          | connect  |               |              |
          |------------------------->|              |
          |          |               |              |
          |          |               | connect      |
          |          |               |------------->|
          |          |               |              |
```

Generated by https://textart.io/sequence#
```
object Devices Model Proxy Target
note left of Devices: Dev\nSetup
Model->Target: registrar
Devices->Target: connect
note left of Devices: Proxy\nSetup
Model->Proxy: registrar
Devices->Proxy: connect
Proxy->Target: connect
```
